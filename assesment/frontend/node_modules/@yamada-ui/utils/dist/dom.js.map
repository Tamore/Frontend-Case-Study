{"version":3,"sources":["../src/dom.ts","../src/assertion.ts"],"sourcesContent":["import type React from \"react\"\nimport { isNumber, isUndefined } from \"./assertion\"\n\nexport function createdDom(): boolean {\n  return !!(\n    typeof window !== \"undefined\" &&\n    // eslint-disable-next-line @typescript-eslint/no-unnecessary-condition\n    window.document?.createElement\n  )\n}\n\nexport function getPlatform(): string {\n  return (navigator as any).userAgentData?.platform ?? navigator.platform\n}\n\nexport function vendor(v: RegExp): boolean {\n  return createdDom() && v.test(navigator.vendor)\n}\n\nexport function platform(v: RegExp): boolean {\n  return createdDom() && v.test(getPlatform())\n}\n\nexport function isMac(): boolean {\n  return platform(/^mac/i)\n}\n\nexport function isApple(): boolean {\n  return platform(/mac|iphone|ipad|ipod/i)\n}\n\nexport function isSafari(): boolean {\n  return isApple() && vendor(/apple/i)\n}\n\nexport function isElement(el: any): el is Element {\n  return (\n    el != null &&\n    typeof el == \"object\" &&\n    \"nodeType\" in el &&\n    el.nodeType === Node.ELEMENT_NODE\n  )\n}\n\nexport function isHTMLElement(el: any): el is HTMLElement {\n  if (!isElement(el)) return false\n\n  const win = el.ownerDocument.defaultView ?? window\n\n  return el instanceof win.HTMLElement\n}\n\nexport function isHidden(el: HTMLElement): boolean {\n  if (el.parentElement && isHidden(el.parentElement)) return true\n\n  return el.hidden\n}\n\nexport function isDisabled(el: HTMLElement): boolean {\n  return (\n    Boolean(el.getAttribute(\"disabled\")) ||\n    Boolean(el.getAttribute(\"data-disabled\")) ||\n    Boolean(el.getAttribute(\"aria-disabled\"))\n  )\n}\n\nfunction isVisible(el: HTMLElement) {\n  return el.offsetWidth > 0 && el.offsetHeight > 0\n}\n\nexport function hasTabIndex(el: HTMLElement): boolean {\n  return el.hasAttribute(\"tabindex\")\n}\n\nexport function isContentEditable(el: HTMLElement): boolean {\n  const value = el.getAttribute(\"contenteditable\")\n\n  return value !== \"false\" && value != null\n}\n\nexport function isContains(\n  parent: HTMLElement | null,\n  child: HTMLElement | null,\n): boolean | undefined {\n  return parent === child || parent?.contains(child)\n}\n\nexport function getPx(value: number | string | undefined): number {\n  if (isNumber(value)) return value\n\n  if (isUndefined(value)) return 0\n\n  if (value.includes(\"px\")) return parseFloat(value)\n\n  const isBrowser = createdDom()\n  let fontSize = 16\n\n  if (isBrowser) {\n    const style = window.getComputedStyle(document.documentElement)\n\n    const computedFontSize = parseFloat(style.fontSize)\n\n    if (!isNaN(computedFontSize)) fontSize = computedFontSize\n  }\n\n  return parseFloat(value) * fontSize\n}\n\nexport function getEventRelatedTarget(ev: React.FocusEvent | React.MouseEvent) {\n  return (ev.relatedTarget ??\n    ev.currentTarget.ownerDocument.activeElement) as HTMLElement | null\n}\n\ntype Booleanish = \"false\" | \"true\" | boolean\n\nexport function dataAttr(condition: boolean | undefined) {\n  return (condition ? \"\" : undefined) as Booleanish\n}\n\nexport function ariaAttr(condition: boolean | undefined): boolean | undefined {\n  return condition ? true : undefined\n}\n\nexport interface FocusableElement {\n  focus: (options?: FocusOptions) => void\n}\n\nconst focusableElList = [\n  \"input:not(:disabled):not([disabled])\",\n  \"select:not(:disabled):not([disabled])\",\n  \"textarea:not(:disabled):not([disabled])\",\n  \"embed\",\n  \"iframe\",\n  \"object\",\n  \"a[href]\",\n  \"area[href]\",\n  \"button:not(:disabled):not([disabled])\",\n  \"[tabindex]\",\n  \"audio[controls]\",\n  \"video[controls]\",\n  \"*[tabindex]:not([aria-disabled])\",\n  \"*[contenteditable]\",\n]\n\nconst focusableElSelector: string = focusableElList.join()\n\nexport function getAllFocusable<T extends HTMLElement>(container: T): T[] {\n  const focusableEls: T[] = Array.from(\n    container.querySelectorAll<T>(focusableElSelector),\n  )\n\n  focusableEls.unshift(container)\n\n  return focusableEls.filter((el) => isFocusable(el) && isVisible(el))\n}\n\nexport function isFocusable(el: HTMLElement): boolean {\n  if (!isHTMLElement(el) || isHidden(el) || isDisabled(el)) {\n    return false\n  }\n\n  const { localName } = el\n  const focusableTags = [\"input\", \"select\", \"textarea\", \"button\"]\n\n  if (focusableTags.includes(localName)) return true\n\n  const others = {\n    a: () => el.hasAttribute(\"href\"),\n    audio: () => el.hasAttribute(\"controls\"),\n    video: () => el.hasAttribute(\"controls\"),\n  }\n\n  if (localName in others) return others[localName as keyof typeof others]()\n\n  if (isContentEditable(el)) return true\n\n  return hasTabIndex(el)\n}\n\nexport function hasNegativeTabIndex(el: HTMLElement): boolean {\n  return hasTabIndex(el) && el.tabIndex === -1\n}\n\nexport function isTabbable(el?: HTMLElement | null): boolean {\n  return el\n    ? isHTMLElement(el) && isFocusable(el) && !hasNegativeTabIndex(el)\n    : false\n}\n\nexport function isTouchDevice(): boolean {\n  return \"ontouchstart\" in window\n}\n\nexport function getOwnerWindow(\n  node?: Element | null,\n): typeof globalThis & Window {\n  return getOwnerDocument(node).defaultView ?? window\n}\n\nexport function getOwnerDocument(el?: Element | null): Document {\n  return isElement(el) ? el.ownerDocument : document\n}\n\nexport function getActiveElement(el?: HTMLElement): HTMLElement | null {\n  return getOwnerDocument(el).activeElement as HTMLElement | null\n}\n\nexport function isActiveElement(el: HTMLElement): boolean {\n  return getActiveElement(el) === el\n}\n","import type { Dict } from \"./index.types\"\n\nexport function is(x: any, y: any) {\n  return (x === y && (x !== 0 || 1 / x === 1 / y)) || (x !== x && y !== y)\n}\n\nexport function isNumber(value: any): value is number {\n  return typeof value === \"number\"\n}\n\nexport function isNotNumber(value: any): boolean {\n  return (\n    typeof value !== \"number\" || Number.isNaN(value) || !Number.isFinite(value)\n  )\n}\n\nexport function isNumeric(value: any): boolean {\n  return (\n    !isNaN(parseFloat(String(value))) &&\n    isFinite(Number(value)) &&\n    /^-?\\d*\\.?\\d+$/.test(String(value))\n  )\n}\n\nexport function isString(value: any): value is string {\n  return Object.prototype.toString.call(value) === \"[object String]\"\n}\n\nexport function isBoolean(value: any): value is boolean {\n  return typeof value === \"boolean\"\n}\n\nexport function isUndefined(value: any): value is undefined {\n  return typeof value === \"undefined\"\n}\n\nexport function isNull(value: any): value is null {\n  return value === null\n}\n\nexport function isObject<T extends Dict>(value: any): value is T {\n  return (\n    value !== null &&\n    (typeof value === \"object\" || typeof value === \"function\") &&\n    !isArray(value)\n  )\n}\n\nexport function isArray<T extends any[]>(value: any): value is T {\n  return Array.isArray(value)\n}\n\nexport function isEmpty(value: any): boolean {\n  return !isArray(value) || !value.length || value.every((v) => v == null)\n}\n\nexport function isEmptyObject(value: any): boolean {\n  return isObject(value) && !Object.keys(value).length\n}\n\nexport function isFunction<T extends Function = Function>(\n  value: any,\n): value is T {\n  return typeof value === \"function\"\n}\n\nexport function isUnit(value: any): boolean {\n  return /[0-9].*(em|rem|ex|rex|cap|rcap|ch|rch|ic|ric|lh|rlh|vw|svw|lvw|dvw|vh|svh|lvh|dvh|vi|svi|lvi|dvi|vb|svb|lvb|dvb|vmin|svmin|lvmin|dvmin|vmax|svmax|lvmax|dvmax|cm|mm|Q|in|pc|pt|px|%|cqw|cqh|cqi|cqb|cqmin|cqmax)$/.test(\n    value,\n  )\n}\n\nexport function cast<T>(value: any) {\n  return value as T\n}\n"],"mappings":"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","names":[]}