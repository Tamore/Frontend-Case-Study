{"version":3,"sources":["../src/calc.ts"],"sourcesContent":["type Operator = \"*\" | \"+\" | \"/\" | \"-\"\n\nexport type Operand = number | string\n\nfunction toExpression(operator: Operator, ...args: Operand[]) {\n  return args.join(` ${operator} `).replace(/calc/g, \"\")\n}\n\nfunction add(...args: Operand[]) {\n  return `calc(${toExpression(\"+\", ...args)})`\n}\n\nfunction subtract(...args: Operand[]) {\n  return `calc(${toExpression(\"-\", ...args)})`\n}\n\nfunction multiply(...args: Operand[]) {\n  return `calc(${toExpression(\"*\", ...args)})`\n}\n\nfunction divide(...args: Operand[]) {\n  return `calc(${toExpression(\"/\", ...args)})`\n}\n\nfunction negate(value: Operand) {\n  if (!isNaN(parseFloat(value.toString())))\n    return String(value).startsWith(\"-\") ? String(value).slice(1) : `-${value}`\n\n  return multiply(value, -1)\n}\n\ninterface Calc {\n  add: (...args: Operand[]) => Calc\n  divide: (...args: Operand[]) => Calc\n  multiply: (...args: Operand[]) => Calc\n  negate: () => Calc\n  subtract: (...args: Operand[]) => Calc\n  toString: () => string\n}\n\nexport const calc = Object.assign(\n  (x: Operand): Calc => ({\n    add: (...args) => calc(add(x, ...args)),\n    divide: (...args) => calc(divide(x, ...args)),\n    multiply: (...args) => calc(multiply(x, ...args)),\n    negate: () => calc(negate(x)),\n    subtract: (...args) => calc(subtract(x, ...args)),\n    toString: () => x.toString(),\n  }),\n  {\n    add,\n    divide,\n    multiply,\n    negate,\n    subtract,\n  },\n)\n"],"mappings":";;;;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA,SAAS,aAAa,aAAuB,MAAiB;AAC5D,SAAO,KAAK,KAAK,IAAI,QAAQ,GAAG,EAAE,QAAQ,SAAS,EAAE;AACvD;AAEA,SAAS,OAAO,MAAiB;AAC/B,SAAO,QAAQ,aAAa,KAAK,GAAG,IAAI,CAAC;AAC3C;AAEA,SAAS,YAAY,MAAiB;AACpC,SAAO,QAAQ,aAAa,KAAK,GAAG,IAAI,CAAC;AAC3C;AAEA,SAAS,YAAY,MAAiB;AACpC,SAAO,QAAQ,aAAa,KAAK,GAAG,IAAI,CAAC;AAC3C;AAEA,SAAS,UAAU,MAAiB;AAClC,SAAO,QAAQ,aAAa,KAAK,GAAG,IAAI,CAAC;AAC3C;AAEA,SAAS,OAAO,OAAgB;AAC9B,MAAI,CAAC,MAAM,WAAW,MAAM,SAAS,CAAC,CAAC;AACrC,WAAO,OAAO,KAAK,EAAE,WAAW,GAAG,IAAI,OAAO,KAAK,EAAE,MAAM,CAAC,IAAI,IAAI,KAAK;AAE3E,SAAO,SAAS,OAAO,EAAE;AAC3B;AAWO,IAAM,OAAO,OAAO;AAAA,EACzB,CAAC,OAAsB;AAAA,IACrB,KAAK,IAAI,SAAS,KAAK,IAAI,GAAG,GAAG,IAAI,CAAC;AAAA,IACtC,QAAQ,IAAI,SAAS,KAAK,OAAO,GAAG,GAAG,IAAI,CAAC;AAAA,IAC5C,UAAU,IAAI,SAAS,KAAK,SAAS,GAAG,GAAG,IAAI,CAAC;AAAA,IAChD,QAAQ,MAAM,KAAK,OAAO,CAAC,CAAC;AAAA,IAC5B,UAAU,IAAI,SAAS,KAAK,SAAS,GAAG,GAAG,IAAI,CAAC;AAAA,IAChD,UAAU,MAAM,EAAE,SAAS;AAAA,EAC7B;AAAA,EACA;AAAA,IACE;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,EACF;AACF;","names":[]}